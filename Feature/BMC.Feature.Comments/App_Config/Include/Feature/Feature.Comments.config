<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <settings>
      <!-- Comments Feature Settings -->
      <setting name="BMC.Feature.Comments.StoragePath" value="/sitecore/content/BMC/SA/Blog" />
      <setting name="BMC.Feature.Comments.EnableModeration" value="true" />
      <setting name="BMC.Feature.Comments.AutoApproveRegisteredUsers" value="false" />
      <setting name="BMC.Feature.Comments.RequireAuthentication" value="true" />
      <setting name="BMC.Feature.Comments.MaxCommentLength" value="1000" />
      <setting name="BMC.Feature.Comments.AllowNestedComments" value="true" />
      <setting name="BMC.Feature.Comments.MaxNestingLevel" value="3" />
      <setting name="BMC.Feature.Comments.EnableEmailNotifications" value="true" />
      <setting name="BMC.Feature.Comments.NotifyAuthorOnComment" value="true" />
      <setting name="BMC.Feature.Comments.NotifyOnReply" value="true" />
      <setting name="BMC.Feature.Comments.AdminEmail" value="admin@bmc.sa" />
      <setting name="BMC.Feature.Comments.CommentsPerPage" value="20" />
      <setting name="BMC.Feature.Comments.EnableSpamFiltering" value="true" />
    </settings>

    <pipelines>
      <mvc.actionExecuted>
        <processor type="BMC.Feature.Comments.Pipelines.ValidateComment, BMC.Feature.Comments" />
      </mvc.actionExecuted>

      <httpRequestBegin>
        <processor type="BMC.Feature.Comments.Pipelines.ResolveCommentContext, BMC.Feature.Comments"
                   patch:after="processor[@type='Sitecore.Pipelines.HttpRequest.ItemResolver, Sitecore.Kernel']" />
      </httpRequestBegin>
    </pipelines>

    <events>
      <event name="comment:created">
        <handler type="BMC.Feature.Comments.Events.CommentCreatedHandler, BMC.Feature.Comments" method="OnCommentCreated" />
      </event>
      <event name="comment:approved">
        <handler type="BMC.Feature.Comments.Events.CommentApprovedHandler, BMC.Feature.Comments" method="OnCommentApproved" />
      </event>
      <event name="comment:deleted">
        <handler type="BMC.Feature.Comments.Events.CommentDeletedHandler, BMC.Feature.Comments" method="OnCommentDeleted" />
      </event>
    </events>

    <services>
      <configurator type="BMC.Feature.Comments.DependencyInjection.ServicesConfigurator, BMC.Feature.Comments" />
    </services>

    <log4net>
      <logger name="BMC.Feature.Comments" additivity="false">
        <level value="INFO" />
        <appender-ref ref="LogFileAppender" />
      </logger>
    </log4net>
  </sitecore>
</configuration>