<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <settings>
      <!-- Blog Feature Settings -->
      <setting name="BMC.Feature.Blog.DefaultViewCount" value="0" />
      <setting name="BMC.Feature.Blog.PostsPerPage" value="10" />
      <setting name="BMC.Feature.Blog.EnableCaching" value="true" />
      <setting name="BMC.Feature.Blog.CacheExpiration" value="01:00:00" />
      <setting name="BMC.Feature.Blog.MaxRelatedPosts" value="3" />
      <setting name="BMC.Feature.Blog.EnableViewCountTracking" value="true" />
    </settings>

    <caches>
      <!-- Blog Post Cache -->
      <cache name="BMC.Blog.Cache" maxSize="10MB" />
      <cache name="BMC.Blog.Categories.Cache" maxSize="5MB" />
    </caches>

    <pipelines>
      <httpRequestBegin>
        <processor type="BMC.Feature.Blog.Pipelines.ResolveBlogPost, BMC.Feature.Blog"
                   patch:after="processor[@type='Sitecore.Pipelines.HttpRequest.ItemResolver, Sitecore.Kernel']" />
      </httpRequestBegin>

      <mvc.renderRendering>
        <processor type="BMC.Feature.Blog.Pipelines.CacheBlogRendering, BMC.Feature.Blog"
                   patch:before="processor[@type='Sitecore.Mvc.Pipelines.Response.RenderRendering.ExecuteRenderer, Sitecore.Mvc']" />
      </mvc.renderRendering>
    </pipelines>

    <events>
      <event name="item:saved">
        <handler type="BMC.Feature.Blog.Events.InvalidateBlogCache, BMC.Feature.Blog" method="OnItemSaved" />
      </event>
      <event name="item:deleted">
        <handler type="BMC.Feature.Blog.Events.InvalidateBlogCache, BMC.Feature.Blog" method="OnItemDeleted" />
      </event>
    </events>

    <services>
      <configurator type="BMC.Feature.Blog.DependencyInjection.ServicesConfigurator, BMC.Feature.Blog" />
    </services>

    <log4net>
      <logger name="BMC.Feature.Blog" additivity="false">
        <level value="INFO" />
        <appender-ref ref="LogFileAppender" />
      </logger>
    </log4net>
  </sitecore>
</configuration>